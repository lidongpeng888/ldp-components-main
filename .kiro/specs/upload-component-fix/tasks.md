# Upload 组件修复实施计划

## 阶段 1：紧急修复 - 解决蒙层问题

- [x] 1. 创建简化版 Upload 组件
  - 移除预览模态框相关代码，避免蒙层问题
  - 简化组件结构，只保留基础上传功能
  - 移除复杂的 hooks 依赖，使用简单的状态管理
  - _需求: 1.1, 1.2, 1.3_

- [ ] 2. 修复 TypeScript 类型错误
  - 重新定义 emit 事件类型，确保类型匹配
  - 为事件处理函数添加正确的类型注解
  - 修复 props 类型定义中的可选属性问题
  - _需求: 3.1, 3.2, 3.3_

- [ ] 3. 实现基础上传功能
  - 实现普通文件上传功能，支持单文件和多文件
  - 实现拖拽上传功能，基于 a-upload-dragger 组件
  - 添加基础的文件验证（大小、类型、数量限制）
  - _需求: 1.1, 1.2, 1.3_

- [x] 4. 修复 Storybook 配置
  - 更新 Storybook stories，移除预览相关配置
  - 添加基础上传功能的演示用例
  - 确保所有 Story 能正常显示，无遮罩层问题
  - _需求: 1.1, 1.2, 1.3_

## 阶段 2：功能验证和测试

- [ ] 5. 测试基础上传功能
  - 测试文件选择和上传流程是否正常
  - 验证拖拽上传功能是否工作
  - 检查文件验证机制是否生效
  - _需求: 1.1, 1.2, 1.3_

- [ ] 6. 验证 Storybook 显示
  - 确认所有 Upload 相关的 Story 正常显示
  - 验证交互功能正常，无遮罩层阻挡
  - 测试不同配置下的组件表现
  - _需求: 1.1, 1.2, 1.3_

## 阶段 3：功能恢复（可选，后续执行）

- [x] 7. 重新实现预览功能
  - 创建新的预览组件，确保状态管理正确
  - 实现模态框预览，避免状态同步问题
  - 添加预览功能的测试用例
  - _需求: 2.1, 2.2, 2.3_

- [ ] 8. 恢复高级功能
  - 重新实现并发上传控制
  - 添加重试机制和错误处理
  - 恢复粘贴上传功能
  - _需求: 1.1, 1.2, 1.3_

- [ ] 9. 完善文档和测试
  - 更新组件文档和使用示例
  - 添加完整的单元测试和集成测试
  - 优化性能和用户体验
  - _需求: 3.1, 3.2, 3.3_
